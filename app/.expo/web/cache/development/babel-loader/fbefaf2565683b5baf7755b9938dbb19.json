{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useFormReport } from \"../../hooks/useFormReport\";\nimport MenuNavigation from \"../../common/constants/navigation\";\nimport RequestService from \"../../common/services/RequestService\";\nimport { ModalComponent } from \"../../components/Modal\";\nimport { HeaderComponent } from \"../../components/Header\";\nimport { ComeBackComponent } from \"../../components/ComeBack\";\nimport { PersonLabelComponent } from \"../../components/PersonLabel\";\nimport { ApprovalRequest } from \"../../components/Modal/ApprovalRequest\";\nimport { RequestContentModalComponent } from \"../../components/Modal/Request\";\n\nvar loadingGif = require(\"../../assets/loader-two.gif\");\n\nimport * as S from \"./styles\";\nimport { ButtonComponent } from \"../../components/Button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ListUsersScreen() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      users = _useState4[0],\n      setUsers = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      confirmModal = _useState10[0],\n      setConfirmModal = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalConcluded = _useState12[0],\n      setModalConcluded = _useState12[1];\n\n  var service = new RequestService();\n  var navigation = useNavigation();\n\n  var _useFormReport = useFormReport(),\n      trigger = _useFormReport.trigger,\n      setTrigger = _useFormReport.setTrigger;\n\n  useEffect(function () {\n    var getUsers = function () {\n      var _ref = _asyncToGenerator(function* () {\n        yield service.getUsers().then(function (response) {\n          setUsers(response);\n        }).finally(function () {\n          return setLoading(false);\n        });\n      });\n\n      return function getUsers() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getUsers();\n  }, [trigger]);\n\n  var timeModal = function timeModal() {\n    setModalConcluded(true);\n  };\n\n  var deleteMember = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        yield service.deleteUser(id);\n        setConfirmModal(false);\n        setTimeout(timeModal, 300);\n        setTrigger(!trigger);\n      } catch (err) {\n        alert(\"Houve algum problema ao excluir esse usuário\");\n      }\n    });\n\n    return function deleteMember() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var disabledUsersAdmin = users && Object.entries(users).filter(function (item) {\n    return item[1].cargo != 'administrador';\n  });\n  var listUsers = users && (disabledUsersAdmin == null ? void 0 : disabledUsersAdmin.sort(function (a, b) {\n    if (a[1].nome < b[1].nome) {\n      return -1;\n    } else {\n      return 1;\n    }\n  }));\n  return _jsxs(Fragment, {\n    children: [_jsx(HeaderComponent, {\n      children: _jsxs(S.ContentHeader, {\n        children: [_jsxs(S.ComeBack, {\n          children: [_jsx(ComeBackComponent, {}), _jsx(S.Navigation, {\n            children: MenuNavigation.USERS\n          })]\n        }), _jsx(ButtonComponent, {\n          title: \"Cadastrar\",\n          onPress: function onPress() {\n            return navigation.navigate(\"UserRegister\");\n          },\n          width: \"136px\",\n          heigth: \"33px\",\n          size: \"12px\",\n          icon: \"user-plus\",\n          color: \"white\"\n        })]\n      })\n    }), _jsx(ScrollView, {\n      children: _jsx(S.Container, {\n        children: loading ? _jsx(S.Loading, {\n          source: loadingGif\n        }) : _jsx(Fragment, {\n          children: listUsers.map(function (user) {\n            var _user$;\n\n            return _jsx(PersonLabelComponent, {\n              nome: (_user$ = user[1]) == null ? void 0 : _user$.nome,\n              onPress: function onPress() {\n                return navigation.navigate(\"UsersInformation\", {\n                  nome: \"\" + user[1].nome,\n                  telefone: \"\" + user[1].telefone,\n                  email: \"\" + user[1].email,\n                  endereco: \"\" + user[1].endereco,\n                  bairro: \"\" + user[1].bairro,\n                  cep: \"\" + user[1].cep,\n                  cidade: \"\" + user[1].cidade,\n                  estado: \"\" + user[1].estado,\n                  estado_civil: \"\" + user[1].estado_civil,\n                  data_de_nascimento: \"\" + user[1].data_de_nascimento,\n                  status: \"\" + user[1].status,\n                  numero_casa: \"\" + user[1].numero_casa,\n                  id: \"\" + user[0],\n                  active: setTrigger\n                });\n              },\n              delMember: function delMember() {\n                setConfirmModal(true), setName(user[1].nome), setId(user[0]);\n              }\n            });\n          })\n        })\n      })\n    }), _jsx(ModalComponent, {\n      isVisible: confirmModal,\n      onBackdropPress: function onBackdropPress() {\n        return setConfirmModal(false);\n      },\n      children: _jsx(RequestContentModalComponent, {\n        name: name,\n        cancel: function cancel() {\n          return setConfirmModal(false);\n        },\n        confirm: function confirm() {\n          deleteMember();\n        }\n      })\n    }), _jsx(ModalComponent, {\n      isVisible: modalConcluded,\n      onBackdropPress: function onBackdropPress() {\n        return setModalConcluded(false);\n      },\n      children: _jsx(ApprovalRequest, {\n        name: name\n      })\n    })]\n  });\n}","map":{"version":3,"names":["useNavigation","React","Fragment","useEffect","useState","useFormReport","MenuNavigation","RequestService","ModalComponent","HeaderComponent","ComeBackComponent","PersonLabelComponent","ApprovalRequest","RequestContentModalComponent","loadingGif","require","S","ButtonComponent","ListUsersScreen","id","setId","users","setUsers","name","setName","loading","setLoading","confirmModal","setConfirmModal","modalConcluded","setModalConcluded","service","navigation","trigger","setTrigger","getUsers","then","response","finally","timeModal","deleteMember","deleteUser","setTimeout","err","alert","disabledUsersAdmin","Object","entries","filter","item","cargo","listUsers","sort","a","b","nome","USERS","navigate","map","user","telefone","email","endereco","bairro","cep","cidade","estado","estado_civil","data_de_nascimento","status","numero_casa","active"],"sources":["C:/Users/felip/AppIbavNovo/app/src/screens/ListUsers/index.tsx"],"sourcesContent":["import { ScrollView } from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\n\r\nimport { useFormReport } from \"../../hooks/useFormReport\";\r\nimport MenuNavigation from \"../../common/constants/navigation\";\r\nimport RequestService from \"../../common/services/RequestService\";\r\n\r\nimport { ModalComponent } from \"../../components/Modal\";\r\nimport { HeaderComponent } from \"../../components/Header\";\r\nimport { ComeBackComponent } from \"../../components/ComeBack\";\r\nimport { PersonLabelComponent } from \"../../components/PersonLabel\";\r\nimport { ApprovalRequest } from \"../../components/Modal/ApprovalRequest\";\r\nimport { RequestContentModalComponent } from \"../../components/Modal/Request\";\r\n\r\nconst loadingGif = require(\"../../assets/loader-two.gif\");\r\nimport { IPropsAppStack } from \"../../routes/AppStack/types\";\r\n\r\nimport * as S from \"./styles\";\r\nimport { ButtonComponent } from \"../../components/Button\";\r\n\r\nexport function ListUsersScreen() {\r\n  const [id, setId] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [name, setName] = useState<string>();\r\n  const [loading, setLoading] = useState(true);\r\n  const [confirmModal, setConfirmModal] = useState(false);\r\n  const [modalConcluded, setModalConcluded] = useState(false);\r\n\r\n  const service = new RequestService();\r\n  const navigation = useNavigation<IPropsAppStack>();\r\n  const { trigger, setTrigger } = useFormReport();\r\n\r\n  useEffect(() => {\r\n    const getUsers = async () => {\r\n      await service\r\n        .getUsers()\r\n        .then((response) => {\r\n          setUsers(response);\r\n        })\r\n        .finally(() => setLoading(false));\r\n    };\r\n\r\n    getUsers();\r\n\r\n  }, [trigger]);\r\n\r\n  const timeModal = () => {\r\n    setModalConcluded(true);\r\n\r\n  };\r\n\r\n  const deleteMember = async () => {\r\n    try {\r\n      await service.deleteUser(id);\r\n      setConfirmModal(false);\r\n      setTimeout(timeModal, 300);\r\n      setTrigger(!trigger);\r\n    } catch (err) {\r\n      alert(\"Houve algum problema ao excluir esse usuário\");\r\n    }\r\n  };\r\n\r\n  const disabledUsersAdmin = users && Object.entries(users).filter((item: any) => {\r\n    return item[1].cargo != 'administrador'\r\n  })\r\n\r\n  const listUsers = users && disabledUsersAdmin?.sort(function (a: any, b: any) {\r\n    if (a[1].nome < b[1].nome) {\r\n      return -1;\r\n    } else {\r\n      return 1;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <HeaderComponent>\r\n        <S.ContentHeader>\r\n          <S.ComeBack>\r\n            <ComeBackComponent />\r\n            <S.Navigation>{MenuNavigation.USERS}</S.Navigation>\r\n          </S.ComeBack>\r\n          <ButtonComponent\r\n            title=\"Cadastrar\"\r\n            onPress={() => navigation.navigate(\"UserRegister\")}\r\n            width=\"136px\"\r\n            heigth=\"33px\"\r\n            size=\"12px\"\r\n            icon=\"user-plus\"\r\n            color=\"white\"\r\n          />\r\n        </S.ContentHeader>\r\n        {/* <NotificationComponent /> */}\r\n      </HeaderComponent>\r\n\r\n      <ScrollView>\r\n        <S.Container>\r\n          {loading ? (\r\n            <S.Loading source={loadingGif} />\r\n          ) : (\r\n            <Fragment>\r\n              {listUsers.map((user: any) => {\r\n                return (\r\n                  <PersonLabelComponent\r\n                    nome={user[1]?.nome}\r\n                    onPress={() =>\r\n                      navigation.navigate(\"UsersInformation\", {\r\n                        nome: `${user[1].nome}`,\r\n                        telefone: `${user[1].telefone}`,\r\n                        email: `${user[1].email}`,\r\n                        endereco: `${user[1].endereco}`,\r\n                        bairro: `${user[1].bairro}`,\r\n                        cep: `${user[1].cep}`,\r\n                        cidade: `${user[1].cidade}`,\r\n                        estado: `${user[1].estado}`,\r\n                        estado_civil: `${user[1].estado_civil}`,\r\n                        data_de_nascimento: `${user[1].data_de_nascimento}`,\r\n                        status: `${user[1].status}`,\r\n                        numero_casa: `${user[1].numero_casa}`,\r\n                        id: `${user[0]}`,\r\n                        active: setTrigger,\r\n                      })\r\n                    }\r\n                    delMember={() => {\r\n                      setConfirmModal(true),\r\n                        setName(user[1].nome),\r\n                        setId(user[0]);\r\n                    }}\r\n                  />\r\n                );\r\n              })}\r\n            </Fragment>\r\n          )}\r\n        </S.Container>\r\n      </ScrollView>\r\n\r\n      <ModalComponent\r\n        isVisible={confirmModal}\r\n        onBackdropPress={() => setConfirmModal(false)}\r\n      >\r\n        <RequestContentModalComponent\r\n          name={name}\r\n          cancel={() => setConfirmModal(false)}\r\n          confirm={() => {\r\n            deleteMember();\r\n          }}\r\n        />\r\n      </ModalComponent>\r\n\r\n      <ModalComponent\r\n        isVisible={modalConcluded}\r\n        onBackdropPress={() => setModalConcluded(false)}\r\n      >\r\n        <ApprovalRequest name={name} />\r\n      </ModalComponent>\r\n    </Fragment>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}