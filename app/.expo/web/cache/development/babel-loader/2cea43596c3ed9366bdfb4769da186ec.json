{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { Fragment } from \"react\";\nimport { TitleComponent } from \"../../Title\";\nimport { ButtonComponent } from \"../../Button\";\nimport useUserFiltered from \"../../../hooks/useUserFiltered\";\nimport { useFormReport } from \"../../../hooks/useFormReport\";\nimport { connectApi } from \"../../../common/services/ConnectApi\";\nimport * as S from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ReportContentModalComponent(_ref) {\n  var handleCloseModal = _ref.handleCloseModal,\n      setSendModal = _ref.setSendModal;\n\n  var _useFormReport = useFormReport(),\n      state = _useFormReport.state;\n\n  var _useUserFiltered = useUserFiltered(),\n      user = _useUserFiltered.user;\n\n  var presentCL = state.presencaCelula.filter(function (item) {\n    return item.celula === \"P\";\n  });\n  var presentCT = state.presencaCulto.filter(function (item) {\n    return item.culto === \"P\";\n  });\n  var presentCLMembers = presentCL.filter(function (item) {\n    return item.status !== \"visitante\";\n  });\n  var presentCTMembers = presentCT.filter(function (item) {\n    return item.status !== \"visitante\";\n  });\n  var presentCLVisitors = presentCL.filter(function (item) {\n    return item.status === \"visitante\";\n  });\n  var presentCTVisitors = presentCT.filter(function (item) {\n    return item.status === \"visitante\";\n  });\n\n  var handleSubmitForm = function handleSubmitForm() {\n    try {\n      var numero_celula = user && user[0][1].numero_celula;\n      var oferta = state.offer;\n      var data = state.textDate;\n      var presencas = [].concat(_toConsumableArray(state.members), _toConsumableArray(state.visitors));\n      var observacoes = state.observations;\n      connectApi.post(\"/relatorios.json\", {\n        data: data,\n        celula: state.celulaSelect,\n        rede: state.redeSelect,\n        discipulado: state.discipuladoSelect,\n        observacoes: observacoes,\n        oferta: oferta,\n        presencas: presencas\n      }).then(function () {\n        setSendModal(true);\n        handleCloseModal(false);\n      });\n    } catch (err) {\n      if (err) {\n        Alert.alert(\"Ops algo deu errado ao enviar o seu formulário!\");\n        handleCloseModal(false);\n      }\n    }\n  };\n\n  var tituloCelula = function tituloCelula() {\n    switch (user && user[0][1].cargo) {\n      case 'lider':\n        return _jsxs(S.BoxTitle, {\n          children: [_jsx(TitleComponent, {\n            title: \"C\\xE9lula: \",\n            decoration: true,\n            primary: true,\n            weight: true\n          }), _jsx(TitleComponent, {\n            title: (user && user[0][1].numero_celula) + \" - \" + (user && user[0][1].rede),\n            decoration: true,\n            primary: true,\n            uppercase: true,\n            weight: true\n          })]\n        });\n\n      case 'discipulador':\n        return _jsxs(S.BoxTitle, {\n          children: [_jsx(TitleComponent, {\n            title: \"C\\xE9lula: \",\n            decoration: true,\n            primary: true,\n            weight: true\n          }), _jsx(TitleComponent, {\n            title: \"\" + state.celulaSelect,\n            decoration: true,\n            primary: true,\n            uppercase: true,\n            weight: true\n          })]\n        });\n\n      case 'pastor':\n        return _jsxs(S.BoxTitle, {\n          children: [_jsx(TitleComponent, {\n            title: \"C\\xE9lula: \",\n            decoration: true,\n            primary: true,\n            weight: true\n          }), _jsx(TitleComponent, {\n            title: state.celulaSelect,\n            decoration: true,\n            primary: true,\n            uppercase: true,\n            weight: true\n          })]\n        });\n\n      case 'administrador':\n        return _jsxs(S.BoxTitle, {\n          children: [_jsx(TitleComponent, {\n            title: \"C\\xE9lula: \",\n            decoration: true,\n            primary: true,\n            weight: true\n          }), _jsx(TitleComponent, {\n            title: state.celulaSelect + \" - \" + state.redeSelect,\n            decoration: true,\n            primary: true,\n            uppercase: true,\n            weight: true\n          })]\n        });\n    }\n  };\n\n  return _jsx(Fragment, {\n    children: _jsxs(S.ContentModal, {\n      children: [_jsx(S.TitleModal, {\n        children: \"Resumo do relat\\xF3rio\"\n      }), _jsxs(S.ListModal, {\n        children: [tituloCelula(), _jsx(TitleComponent, {\n          title: \"Oferta: \" + (state.offer ? state.offer : \"Nenhuma oferta!\"),\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"Data: \" + state.textDate,\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"Presen\\xE7a:\",\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"- \" + (presentCLMembers ? presentCLMembers.length : 0) + \" membros (c\\xE9lula)\",\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"- \" + (presentCTMembers ? presentCTMembers.length : 0) + \" membros (culto)\",\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"- \" + (presentCLVisitors ? presentCLVisitors.length : 0) + \" Visitantes (c\\xE9lula)\",\n          decoration: true,\n          primary: true\n        }), _jsx(TitleComponent, {\n          title: \"- \" + (presentCTVisitors ? presentCTVisitors.length : 0) + \" Visitantes (culto)\",\n          decoration: true,\n          primary: true\n        })]\n      }), _jsx(S.ObservationModal, {\n        children: _jsx(TitleComponent, {\n          title: \"Observa\\xE7\\xF5es: \" + (state.observations ? state.observations : \"Nenhuma observação!\"),\n          decoration: true,\n          primary: true\n        })\n      }), _jsxs(S.BoxButton, {\n        children: [_jsx(ButtonComponent, {\n          title: \"Cancelar\",\n          onPress: function onPress() {\n            return handleCloseModal(false);\n          },\n          width: \"150px\",\n          size: \"16px\"\n        }), _jsx(ButtonComponent, {\n          title: \"Confirmar\",\n          onPress: handleSubmitForm,\n          width: \"150px\",\n          size: \"16px\"\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","Fragment","TitleComponent","ButtonComponent","useUserFiltered","useFormReport","connectApi","S","ReportContentModalComponent","handleCloseModal","setSendModal","state","user","presentCL","presencaCelula","filter","item","celula","presentCT","presencaCulto","culto","presentCLMembers","status","presentCTMembers","presentCLVisitors","presentCTVisitors","handleSubmitForm","numero_celula","oferta","offer","data","textDate","presencas","members","visitors","observacoes","observations","post","celulaSelect","rede","redeSelect","discipulado","discipuladoSelect","then","err","Alert","alert","tituloCelula","cargo","length"],"sources":["C:/Users/felip/AppIbavNovo/app/src/components/Modal/Report/index.tsx"],"sourcesContent":["import { Alert } from \"react-native\";\r\nimport React, { Fragment } from \"react\";\r\n\r\nimport { TitleComponent } from \"../../Title\";\r\nimport { ButtonComponent } from \"../../Button\";\r\n\r\nimport useUserFiltered from \"../../../hooks/useUserFiltered\";\r\nimport { useFormReport } from \"../../../hooks/useFormReport\";\r\nimport { connectApi } from \"../../../common/services/ConnectApi\";\r\n\r\nimport { IContentModal } from \"./types\";\r\n\r\nimport * as S from \"./styles\";\r\n\r\nexport function ReportContentModalComponent({\r\n  handleCloseModal,\r\n  setSendModal,\r\n}: IContentModal) {\r\n  const { state } = useFormReport();\r\n  const { user } = useUserFiltered();\r\n\r\n  const presentCL = state.presencaCelula.filter((item: any) => item.celula === \"P\");\r\n  const presentCT = state.presencaCulto.filter((item: any) => item.culto === \"P\");\r\n\r\n  const presentCLMembers = presentCL.filter((item: any) => item.status !== \"visitante\")\r\n  const presentCTMembers = presentCT.filter((item: any) => item.status !== \"visitante\")\r\n\r\n  const presentCLVisitors = presentCL.filter((item: any) => item.status === \"visitante\");\r\n  const presentCTVisitors = presentCT.filter((item: any) => item.status === \"visitante\");\r\n\r\n  const handleSubmitForm = () => {\r\n    try {\r\n      const numero_celula = user && user[0][1].numero_celula;\r\n      const oferta = state.offer;\r\n      const data = state.textDate;\r\n\r\n      let presencas = [...state.members, ...state.visitors];\r\n\r\n      const observacoes = state.observations;\r\n\r\n      connectApi\r\n        .post(\"/relatorios.json\", {\r\n          data,\r\n          celula: state.celulaSelect,\r\n          rede: state.redeSelect,\r\n          discipulado: state.discipuladoSelect,\r\n          observacoes,\r\n          oferta,\r\n          presencas,\r\n        })\r\n        .then(() => {\r\n          setSendModal(true);\r\n          handleCloseModal(false);\r\n        })\r\n    } catch (err) {\r\n      if (err) {\r\n        Alert.alert(\"Ops algo deu errado ao enviar o seu formulário!\");\r\n        handleCloseModal(false);\r\n      }\r\n    }\r\n  };\r\n  const tituloCelula = () => {\r\n    switch (user && user[0][1].cargo) {\r\n      case 'lider':\r\n        return (\r\n          <S.BoxTitle>\r\n            <TitleComponent\r\n              title={`Célula: `}\r\n              decoration\r\n              primary\r\n              weight\r\n            />\r\n            <TitleComponent\r\n              title={`${user && user[0][1].numero_celula} - ${user && user[0][1].rede\r\n                }`}\r\n              decoration\r\n              primary\r\n              uppercase\r\n              weight\r\n            />\r\n          </S.BoxTitle>\r\n        )\r\n      case 'discipulador':\r\n        return (\r\n          <S.BoxTitle>\r\n            <TitleComponent\r\n              title={`Célula: `}\r\n              decoration\r\n              primary\r\n              weight\r\n            />\r\n            <TitleComponent\r\n              title={`${state.celulaSelect}`}\r\n              decoration\r\n              primary\r\n              uppercase\r\n              weight\r\n            />\r\n          </S.BoxTitle>\r\n        )\r\n\r\n      case 'pastor':\r\n        return (\r\n          <S.BoxTitle>\r\n            <TitleComponent\r\n              title={`Célula: `}\r\n              decoration\r\n              primary\r\n              weight\r\n            />\r\n            <TitleComponent\r\n              title={state.celulaSelect}\r\n              decoration\r\n              primary\r\n              uppercase\r\n              weight\r\n            />\r\n          </S.BoxTitle>\r\n\r\n        )\r\n\r\n      case 'administrador':\r\n        return (\r\n          <S.BoxTitle>\r\n            <TitleComponent\r\n              title={`Célula: `}\r\n              decoration\r\n              primary\r\n              weight\r\n            />\r\n            <TitleComponent\r\n              title={`${state.celulaSelect} - ${state.redeSelect}`}\r\n              decoration\r\n              primary\r\n              uppercase\r\n              weight\r\n            />\r\n          </S.BoxTitle>\r\n\r\n        )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <S.ContentModal>\r\n        <S.TitleModal>Resumo do relatório</S.TitleModal>\r\n\r\n        <S.ListModal>\r\n          {tituloCelula()}\r\n          <TitleComponent\r\n            title={`Oferta: ${state.offer ? state.offer : \"Nenhuma oferta!\"}`}\r\n            decoration\r\n            primary\r\n          />\r\n          <TitleComponent\r\n            title={`Data: ${state.textDate}`}\r\n            decoration\r\n            primary\r\n          />\r\n          <TitleComponent title=\"Presença:\" decoration primary />\r\n          <TitleComponent\r\n            title={`- ${presentCLMembers ? presentCLMembers.length : 0\r\n              } membros (célula)`}\r\n            decoration\r\n            primary\r\n          />\r\n          <TitleComponent\r\n            title={`- ${presentCTMembers ? presentCTMembers.length : 0\r\n              } membros (culto)`}\r\n            decoration\r\n            primary\r\n          />\r\n          <TitleComponent\r\n            title={`- ${presentCLVisitors ? presentCLVisitors.length : 0\r\n              } Visitantes (célula)`}\r\n            decoration\r\n            primary\r\n          />\r\n          <TitleComponent\r\n            title={`- ${presentCTVisitors ? presentCTVisitors.length : 0\r\n              } Visitantes (culto)`}\r\n            decoration\r\n            primary\r\n          />\r\n        </S.ListModal>\r\n\r\n        <S.ObservationModal>\r\n          <TitleComponent\r\n            title={`Observações: ${state.observations ? state.observations : \"Nenhuma observação!\"\r\n              }`}\r\n            decoration\r\n            primary\r\n          />\r\n        </S.ObservationModal>\r\n        <S.BoxButton>\r\n          <ButtonComponent\r\n            title=\"Cancelar\"\r\n            onPress={() => handleCloseModal(false)}\r\n            width='150px'\r\n            size='16px'\r\n          />\r\n\r\n          <ButtonComponent\r\n            title=\"Confirmar\"\r\n            onPress={handleSubmitForm}\r\n            width='150px'\r\n            size='16px'\r\n\r\n          />\r\n        </S.BoxButton>\r\n      </S.ContentModal>\r\n    </Fragment>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}